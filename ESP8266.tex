\subsection{Anschluss}

\begin{figure}[ht]
  \centering
  \includegraphics[scale=0.42]{images/ESP8266.png}	
  %	\caption{}
  \label{ESP8266-01}
\end{figure}


\begin{figure}[ht]
  \centering
  \includegraphics[scale=1.00]{images/ESP8266_ESP-01.png}	
  %	\caption{}
  \label{ESP8266_ESP-01}
\end{figure}

\subsection{Firmware Update}

%Quelle: https://www.allaboutcircuits.com/projects/flashing-the-ESP-01-firmware-to-SDK-v2.0.0-is-easier-now/
Tools: \url{http://www.espressif.com/en/support/download/other-tools}\\
SDKs und Demos: \url{http://www.espressif.com/en/support/download/sdks-demos}\\
NONOS SDK Source: \url{https://github.com/espressif/ESP8266_NONOS_SDK/releases}\\
Download NONOS SDK: \url{https://github.com/espressif/ESP8266_NONOS_SDK/archive/v2.1.0.zip}\\

Um das Firmware Update ausführen zu können muss der GPIO0 Eingang auf GND gesetzt werden. Das kann entweder dauerhaft gemacht werden indem der Pin direkt auf GND verbunden wird. Oder man macht es über einen Schalter. Dann ist wichtig, dass der Schalter während des Boot-Vorgangs bzw. bevor Reset gedrückt wird, gedrückt gehalten wird. Ich würde aber empfehlen einfach den GPIO0 Pin über eine Kabel auf GND zu verbinden. Reset kann ausgelöst werden durch entfernen und zurückstecken der 3,3~V Versorgung.

Beim ESP-01 (8~MBit) müssen folgende Dateien und Adressen übertragen werden.    

\begin{table}[h]
\caption{ESP01 (8~MBit) Firmware Dateien}
\centering
\begin{tabular}{|l|c|c|}
\hline
\textbf{Datei (NONOS SDK)} & \textbf{Adresse} \\
\hline
\path{bin/blank.bin} & 0xFB000\\
\hline
\path{bin/esp_init_data_default.bin} & 0xFC000\\
\hline
\path{bin/blank.bin} & 0x7E000\\
\hline
\path{bin/blank.bin} & 0xFE000\\
\hline
\path{bin/boot_v1.6.bin} & 0x00000\\
\hline
\path{bin/at/512+512/user1.1024.new.2.bin} & 0x01000\\
\hline
\end{tabular}
\end{table}


\input{ESP8266-Firmware-Linux}

%\input{ESP8266-Firmware-Win}

\subsection{Verwendung}


\textbf{AT-Befehlsatz:}\\
\url{https://www.itead.cc/wiki/images/5/53/Esp8266_at_instruction_set_en_v1.5.4_0.pdf}\\

\begin{figure}[ht]
  \centering
  \includegraphics[scale=0.2]{images/QR_ESP8266_AT-Cmd.png}	
  %	\caption{}
  \label{ESP8266_AT-Cmd}
\end{figure}


\textbf{Raspberry Pi:}
\begin{console}
sudo systemctl stop serial-getty@ttyAMA0.service
sudo systemctl status serial-getty@ttyAMA0.service
sudo apt-get install minicom
sudo minicom -b 115200 -o -D /dev/ttyAMA0
\end{console}

\textbf{USB UART:} 
\begin{console}
sudo apt-get install minicom
sudo minicom -b 115200 -o -D /dev/ttyUSB0
\end{console}

\textbf{Beispielkommunikation:}

Verbindungstest:
\begin{console}
 AT
\end{console}
\framebox{Enter} \framebox{Strg}+\framebox{J} 

\begin{screensmall}
OK
\end{screensmall}

Reset:
\begin{console}
 AT+RST
\end{console}
\framebox{Enter} \framebox{Strg}+\framebox{J}
\begin{screensmall}
 ets Jan  8 2013,rst cause:2, boot mode:(3,6)

load 0x40100000, len 1396, room 16
tail 4
chksum 0x89
load 0x3ffe8000, len 776, room 4
tail 4
chksum 0xe8
load 0x3ffe8308, len 540, room 4
tail 8
chksum 0xc0
csum 0xc0

2nd boot version : 1.4(b1)
  SPI Speed      : 40MHz
  SPI Mode       : DIO
  SPI Flash Size & Map: 8Mbit(512KB+512KB)
jump to run user1 @ 1000

Ai-Thinker Technology Co.,Ltd.

ready
\end{screensmall}

Version abfragen:
\begin{console}
AT+GMR
\end{console}
\framebox{Enter} \framebox{Strg}+\framebox{J}

\begin{screensmall}
AT version:0.40.0.0(Aug  8 2015 14:45:58)
SDK version:1.3.0
Ai-Thinker Technology Co.,Ltd.
Build:1.3.0.2 Sep 11 2015 11:48:04
OK
\end{screensmall}

WLAN Modus Station setzen:
\begin{console}
 AT+CWMODE=1
\end{console}
\framebox{Enter} \framebox{Strg}+\framebox{J}


\begin{screensmall}
OK
\end{screensmall}

Gefundene WLAN-Netze auflisten:
\begin{console}
 AT+CWLAP
\end{console}
\framebox{Enter} \framebox{Strg}+\framebox{J}


\begin{screensmall}
+CWLAP:(3,"NETGEAR86",-86,"a0:63:91:ca:98:ca",6,-14)
+CWLAP:(4,"A1-PMC",-78,"a4:b1:e9:43:f4:d3",11,-41)
+CWLAP:(4,"Home",-92,"f4:06:8d:3b:e1:3c",11,-41)
+CWLAP:(3,"AndroidAP",-89,"10:a5:d0:73:de:eb",11,23)
\end{screensmall}

Minicom beenden:\\
\framebox{Strg} \framebox{A} \framebox{X}

