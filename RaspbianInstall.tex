
Raspbian ist das offizielle Betriebssystem für den Raspberry~Pi. Mittlerweile kann man es in zwei unterschiedlichen Varianten herunterladen. Man kann zwischen einer minimalen Version (Lite) oder eine Version mit grafischer Oberfläche und vielen vorinstallierten Programmen wählen. Man benötigt in allen Fällen mindestens eine 4~GB große MicroSD-Karte. Man sollte aber, um Reserven zu haben, mindesten 8~GB verwenden.\\  
Zur Installation benötigt man ein beliebiges Linux System mit einem MicroSD-Kartenlesegerät. Die aktuelle Raspbian Version kann als Image-Datei von der Seite \url{https://www.raspberrypi.org/downloads/raspbian/} heruntergeladen werden. Bei dieser Anleitung wird Raspbian Stretch Lite verwendet.

\begin{console}
	wget --trust-server-names http://downloads.raspberrypi.org/raspbian_lite_latest
	unzip 2017-11-29-raspbian-stretch-lite.zip
	rm 2017-11-29-raspbian-stretch-lite.zip
\end{console}


\subsection{Etcher}

Das grafische Programm Etcher (\url{https://etcher.io}) zum Übertragen der Image-Datei verwendet werden. Es ist vor allem für Anfänger zu empfehlen, da beim Konsolenprogramm dd das Risiko besteht, dass Daten einer falsche Partition bzw. eines Laufwerks zerstört werden. Das Programm muss allerdings manuell installiert werden.     

\begin{console}
	wget https://github.com/resin-io/etcher/releases/download/v1.1.2/etcher-1.1.2-linux-x86_64.zip
	unzip etcher-1.1.2-linux-x86_64.zip
	chmod +x etcher-1.1.2-x86_64.AppImage
	sudo mv etcher-1.1.2-x86_64.AppImage /usr/local/bin/etcher
	etcher &
\end{console}


Nach dem Starten wird danach gefragt ob eine Verknüpfung zum Programm erstellt werden soll. Dies sollte man mit "`Yes"' beantworten. Danach kann man mit der Schaltfläche "`Image"' die Image-Datei auswählen. Ist nur ein mögliches Ziel vorhanden, wird es bereits vorausgewählt, z.~B. die SD-Karte im Karten-Slot (dev/memcblk0) oder im USB-Adapter (/dev/sdb). Sind mehrere mögliche Ziele vorhanden, wird die "`Select Drive"' Schaltfläche freigeschaltet. Dann kann ein Laufwerk manuell ausgewählt werden.

\begin{figure}[ht]
	\centering
	\includegraphics[scale=0.3]{images/Etcher_1.png}
	\includegraphics[scale=0.3]{images/Etcher_2.png}
	\label{Etcher}
\end{figure}


Wenn man noch etwas ändern will, kann die entsprechende "`Change"' Schaltfläche ausgewählt werden. Zum Schluss wird der Schreibvorgang mit der "`Flash!"' Schaltfläche gestartet. Möglicherweise wird vom Programm allerdings noch das Passwort abgefragt.\\ 
Das Laufwerk bzw. die Partitionen werden nun aus dem System ausgehängt und der Schreibvorgang gestartet. Der Fortschritt, die durchschnittliche Übertragungsrate und die Restlaufzeit werden während des Vorgangs angezeigt.\\ 


\subsection{dd}

Die erhaltene Image-Datei kann mit dem Programm dd auf eine MicroSD-Karte übertragen werden.\\
\textbf{Es ist unbedingt vor dem Ausführen des Befehls zu prüfen, ob das angegebene Laufwerk bzw. Device auch der vorgesehenen MicroSD-Karte entspricht!}\\
Bei USB-Kartenlesern bzw. USB-Adaptern ist die Ermittlung des Devices leicht über die Systemmeldungen möglich. 

\begin{console}
	dmesg | tail -n 10
\end{console}

\begin{screensmall}
	scsi 3:0:0:0: Direct-Access     MXT-USB  Storage Device   1308 PQ: 0 ANSI: 0 CCS
	sd 3:0:0:0: Attached scsi generic sg1 type 0
	sd 3:0:0:0: [sdb] 15730688 512-byte logical blocks: (8.05 GB/7.50 GiB)
	sd 3:0:0:0: [sdb] Write Protect is off
	sd 3:0:0:0: [sdb] Mode Sense: 03 00 00 00
	sd 3:0:0:0: [sdb] No Caching mode page found
	sd 3:0:0:0: [sdb] Assuming drive cache: write through
	sdb: sdb1 sdb2
	sd 3:0:0:0: [sdb] Attached SCSI removable disk
	EXT4-fs (sdb2): mounted filesystem with ordered data mode. Opts: (null)
\end{screensmall}

Die MicroSD-Karte wurde im Beispiel als Device "`sdb"' über einen USB-Adapter eingebunden. Nun kann man die Image-Datei mit dem Programm dd auf die MicroSD-Karte übertragen. Mit dem Parameter "`of"' muss der komplette Device-Name, in diesem Fall "`/dev/sdb"', angegeben werden. Bei Parameter "`if"' wird die entpackte Image-Datei angeben. Die Blöckgröße bzw. Cache wird mit Parameter "`bs"' gesetzt. Eine größere Blockgröße erhöht die Schreibgeschwindigkeit. Sie wird im Beispiel mit 4 MB angegeben.\\
Zu Beachten ist, dass der USB-Massenspeicher möglicherweise bereits automatisch gemountet wurde. Dann sollte man die Partitionen mit dem Befehl "`umount"' zuerst auswerfen. 


\begin{console}
	umount /dev/sdb1 /dev/sdb2
	dd if=2017-11-29-raspbian-stretch-lite.img of=/dev/sdc bs=4M
\end{console}

\begin{screensmall}
	1323+0 Datensätze ein
	1323+0 Datensätze aus
	1387266048 Bytes (1,4 GB) kopiert, 127,6147 s, 10,4 MB/s
\end{screensmall}


